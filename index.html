<div id="container">
  <div id="screen"></div>
  <div id="ascii-container">
    <pre class="ascii-block" id="ascii-text"></pre>
  </div>
  <div id="cursor"></div>
</div>
<div id="crt"></div>

<audio id="bootSound" src="boot.wav"></audio>
<audio id="beepSound" src="beep.wav"></audio>

<script>
  // ===============================
  // ELEMENTS
  // ===============================
  const screen = document.getElementById("screen");
  const cursor = document.getElementById("cursor");
  const asciiDiv = document.getElementById("ascii-text");
  const bootSound = document.getElementById("bootSound");
  const beepSound = document.getElementById("beepSound");

  // ===============================
  // BOOT LINES
  // ===============================
  const bootLines = [
    "[BOOT] Initializing Ghostroot Engine v3.1.9...",
    "[OK] Scanning system for target: AARON",
    "[OK] Loading birthday protocol...",
    "[OK] Injecting joy-payload...",
    "[OK] Overclocking celebration parameters...",
    "[OK] Decrypting file: birthday_surprise.tar.gz",
    "[WARN] Massive happiness detected → ALLOW",
    "[OK] Starting birthday-terminal.service"
  ];

  function playBoot() {
    bootSound.currentTime = 0;
    bootSound.play().catch(() => {});
  }

  function playBeep() {
    beepSound.currentTime = 0;
    beepSound.play().catch(() => {});
  }

  function typeLine(line, speed = 18) {
    return new Promise(resolve => {
      let i = 0;
      function typing() {
        if (i < line.length) {
          screen.textContent += line[i];
          playBeep();
          i++;
          setTimeout(typing, speed);
        } else {
          screen.textContent += "\n";
          resolve();
        }
      }
      typing();
    });
  }

  // ===============================
  // ASCII LETTERS
  // ===============================
  const H = ["██╗  ██╗","██║  ██║","███████║","██╔══██║","██║  ██║","╚═╝  ╚═╝"];
  const A = ["█████╗ ","██╔══██╗","███████║","██╔══██║","██║  ██║","╚═╝  ╚═╝"];
  const P = ["██████╗ ","██╔══██╗","██████╔╝","██╔═══╝ ","██║     ","╚═╝     "];
  const Y = ["██╗   ██╗","╚██╗ ██╔╝"," ╚████╔╝ ","  ╚██╔╝  ","   ██║   ","   ╚═╝   "];
  const B = ["██████╗ ","██╔══██╗","██████╔╝","██╔══██╗","██████╔╝","╚═════╝ "];
  const I = ["██╗","██║","██║","██║","██║","╚═╝"];
  const R = ["██████╗ ","██╔══██╗","██████╔╝","██╔══██╗","██║  ██║","╚═╝  ╚═╝"];
  const T = ["████████╗","╚══██╔══╝","   ██║   ","   ██║   ","   ██║   ","   ╚═╝   "];
  const D = ["██████╗ ","██╔══██╗","██║  ██║","██║  ██║","██████╔╝","╚═════╝ "];

  const lettersMap = { H,A,P,Y,B,I,R,T,D };
  const word = "HAPPYBIRTHDAY";

  function assembleWord(word) {
    const lines = ["", "", "", "", "", ""];
    for (const char of word) {
      const letter = lettersMap[char];
      for (let i = 0; i < 6; i++) {
        lines[i] += letter[i] + "  ";
      }
    }
    return lines;
  }

  async function typeAscii() {
    const lines = assembleWord(word);
    let result = "";
    for (let i = 0; i < 6; i++) {
      result += lines[i] + "\n";
    }
    asciiDiv.textContent = result;
  }

  // ===============================
  // MAIN MESSAGE
  // ===============================
  const mainMessage = `
>>> HAPPY BIRTHDAY, AARON — Powered by GHOSTROOT <<<

Executing birthday_payload.sh...
→ Happiness level : MAXIMUM
→ Energy : OVERCLOCKED
→ Smile firewall : ENABLED
→ Skill Hacker : ROOT ACCESS
→ Life.exe : RUNNING SMOOTHLY

Message :
"Que cette année soit exploitée à 100% sans bugs et sans crash."
`;

  async function typeMain() {
    for (const char of mainMessage) {
      screen.textContent += char;
      playBeep();
      await new Promise(r => setTimeout(r, 8));
    }
  }

  // ===============================
  // FLOW
  // ===============================
  async function start() {
    playBoot();
    for (const line of bootLines) {
      await typeLine(line, 10);
    }
    screen.textContent += "\n[OK] Launching birthday payload...\n\n";
    await new Promise(r => setTimeout(r, 500));
    await typeAscii();
    screen.textContent += "\n\n";
    await typeMain();
  }

  start();
</script>
